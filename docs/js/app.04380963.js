(function(){"use strict";var e={62:function(e,t,n){var o=n(9242),a=n(3396),r=n(7718),s=n(7057),i=n(2898),c=n(3140);const d=(0,a._)("h5",null,"마커를 더블클릭시 주소가 클립보드에 복사됩니다.",-1);function u(e,t,n,o,u,l){const f=(0,a.up)("kakao-map");return(0,a.wg)(),(0,a.j4)(r.q,null,{default:(0,a.w5)((()=>[(0,a.Wm)(s.L,{elevation:13,rounded:""},{prepend:(0,a.w5)((()=>[d])),append:(0,a.w5)((()=>[(0,a.Wm)(i.T,{icon:"mdi-refresh",onClick:t[0]||(t[0]=e=>l.refresh())})])),_:1}),(0,a.Wm)(c.O,null,{default:(0,a.w5)((()=>[(0,a.Wm)(f)])),_:1})])),_:1})}const l={id:"map"};function f(e,t,n,o,r,s){return(0,a.wg)(),(0,a.iD)("div",l)}var p=n(4870),m=n(65),h={name:"KakaoMap",data(){return{map:null,geocoder:null}},computed:{...(0,m.Se)({addressInfoList:"getInfo"})},async created(){await this.fetchRestaurantInfo()},mounted(){if(window.kakao&&window.kakao.maps)this.initMap();else{const e=document.createElement("script");e.onload=()=>kakao.maps.load(this.initMap),e.src="//dapi.kakao.com/v2/maps/sdk.js?autoload=false&appkey=3f7b3c46ac6ac1e3bcc4d43bfbeda228&libraries=services,clusterer",document.head.appendChild(e)}},methods:{...(0,m.nv)(["fetchRestaurantInfo","fetchLocationInfo"]),initMap(){this.geocoder=new kakao.maps.services.Geocoder,new Promise(((e,t)=>{navigator.geolocation.getCurrentPosition((t=>{e({lat:t.coords.latitude,lng:t.coords.longitude})}),(()=>{function n(n,o){o===kakao.maps.services.Status.OK?e({lat:n[0].y,lng:n[0].x}):t()}this.geocoder.addressSearch("서울특별시 용산구 한강대로 405",n)}),{maximumAge:0,enableHighAccuracy:!0})})).then((({lat:e,lng:t})=>{const n={center:new kakao.maps.LatLng(e,t),level:5},o=document.getElementById("map");this.map=new kakao.maps.Map(o,n);const a=new kakao.maps.LatLng(e,t),r="내 위치",s=new kakao.maps.Marker({position:a});s.setMap((0,p.IU)(this.map));const i=new kakao.maps.InfoWindow({position:a,content:r});i.open(this.map,s)})).catch((()=>{alert("위치정보를 가져올 수 없습니다. 인터넷이나 위치정보를 확인 해 주시기 바랍니다.")})).then(this.addMarker)},async addressSearch(e){return new Promise(((t,n)=>{this.geocoder.addressSearch(e,(function(e,o){o===kakao.maps.services.Status.OK?t({lat:e[0].y,lng:e[0].x}):n(o)}))}))},async addMarker(){try{const e=(0,p.IU)(this.map);this.fetchLocationInfo({fnAddressSearch:this.addressSearch}).then((()=>{const t=this.addressInfoList.map((function(t){const n=new kakao.maps.LatLng(t.lat,t.lng);let o=document.createElement("img");o.className="marker",o.src="https://t1.daumcdn.net/mapjsapi/images/2x/marker.png",o.setAttribute("data-address",t.address);const a=new kakao.maps.CustomOverlay({clickable:!0,content:o,position:n,map:e,yAnchor:1}),r=new kakao.maps.CustomOverlay({position:n,yAnchor:1,content:`<div style="font-size: 0.8em; background-color: white; margin-bottom: 42px;"><div>상호명: ${t.storeName}</div><div>메뉴: ${t.menu}</div><div>추천 메뉴: ${t.popMenu}</div><div>작성자: ${t.writer}</div><div>작성자 리뷰: ${t.review}</div><div>방문자리뷰: ${t.visitorReview}</div></div>`});return o.addEventListener("touchstart",(()=>{r.setMap(e),clearTimeout(window["timeout"]),window["selectedAddress"]===t.address?navigator.clipboard.writeText(`${t.address}(${t.storeName})`).then((()=>{alert("주소가 복사되었습니다!"),delete window["selectedAddress"],r.setMap(null)})):(window["selectedAddress"]=t.address,window["timeout"]=setTimeout((()=>{delete window["selectedAddress"]}),3e3))})),o.addEventListener("mouseover",(()=>{r.setMap(e)})),o.addEventListener("click",(()=>{clearTimeout(window["timeout"]),window["selectedAddress"]===t.address?navigator.clipboard.writeText(`${t.address}(${t.storeName})`).then((()=>{alert("주소가 복사되었습니다!"),delete window["selectedAddress"],r.setMap(null)})):(window["selectedAddress"]=t.address,window["timeout"]=setTimeout((()=>{delete window["selectedAddress"]}),3e3))})),o.addEventListener("touchend",(()=>{r.setMap(null)})),o.addEventListener("mouseout",(()=>{r.setMap(null)})),a})),n=new kakao.maps.MarkerClusterer({map:e,averageCenter:!0,minLevel:5});return n.addMarkers(t)}))}catch(e){console.log(e)}}}},v=n(89);const w=(0,v.Z)(h,[["render",f],["__scopeId","data-v-4c0c5a3a"]]);var g=w,k={name:"App",components:{KakaoMap:g},data:()=>({}),methods:{...(0,m.nv)(["fetchRestaurantInfo"]),...(0,m.OI)(["initInfo"]),async refresh(){await this.initInfo(),await this.fetchRestaurantInfo(),await this.$router.go(0)}}};const y=(0,v.Z)(k,[["render",u]]);var b=y,I=n(2483);function O(e,t,n,o,r,s){const i=(0,a.up)("kakao-map");return(0,a.wg)(),(0,a.j4)(i)}var M=(0,a.aZ)({name:"HomeView",components:{KakaoMap:g}});const j=(0,v.Z)(M,[["render",O]]);var A=j;const L=[{path:"/",name:"home",component:A}],_=(0,I.p7)({history:(0,I.PO)("/restaurant-map/"),routes:L});var T=_,S=n(2415),x=(n(560),n(1076));const C=x.Z.create({baseURL:"https://sheets.googleapis.com/v4/spreadsheets/"});var E=C;const P="1VYl1X0TphiUhax_Hk3FjT5DGIruCovSgPjY56uNWa5o",$="한국",R="AIzaSyBofAeTQWx3yCdZBDkvZOnigX8r03VnkWI";var N={async fetchRestaurantInfo(){try{return await E.get(`${P}/values/${$}`,{params:{key:R}})}catch(e){throw console.log(e),e}}};const W={info:[]},Z={setInfo(e,{info:t=[]}){let n=[];for(let o=0;o<t.length;o++)e.info[o]?.address===t[o].address?n.push({...e.info[o],...t[o]}):n.push(t[o]);return e.info=n,e.info},initInfo(e){e.info=[]}},B={async fetchRestaurantInfo({commit:e}){try{const{data:{values:t}}=await N.fetchRestaurantInfo(),n=t.splice(3).map((([e,t,n,o,a="",r,s,i,c,d])=>({no:e,city:t,region:n,storeName:o,address:a,menu:r,popMenu:s,writer:i,review:c,visitorReview:d})));e("setInfo",{info:n})}catch(t){console.log(t),e("setInfo",{})}},async fetchLocationInfo({state:e,commit:t},{fnAddressSearch:n}){const o=await Promise.all(e.info.map((async e=>{try{if(e.lat&&e.lng||!e.address)return e.lat&&e.lng?e:null;{const t=await n(e.address);return{...e,...t}}}catch(t){return null}})));return t("setInfo",{info:o.filter(Boolean)})}},K={getInfo(e){return e.info}};var U={state:W,mutations:Z,actions:B,getters:K},D=(0,m.MT)({modules:{info:U},plugins:[(0,S.Z)({storage:window.localStorage,paths:["info"]})]}),F=(n(9773),n(9226)),H=(0,F.Rd)();async function V(){const e=await n.e(461).then(n.t.bind(n,3657,23));e.load({google:{families:["Roboto:100,300,400,500,700,900&display=swap"]}})}V(),(0,o.ri)(b).use(T).use(D).use(H).mount("#app")}},t={};function n(o){var a=t[o];if(void 0!==a)return a.exports;var r=t[o]={exports:{}};return e[o].call(r.exports,r,r.exports,n),r.exports}n.m=e,function(){var e=[];n.O=function(t,o,a,r){if(!o){var s=1/0;for(u=0;u<e.length;u++){o=e[u][0],a=e[u][1],r=e[u][2];for(var i=!0,c=0;c<o.length;c++)(!1&r||s>=r)&&Object.keys(n.O).every((function(e){return n.O[e](o[c])}))?o.splice(c--,1):(i=!1,r<s&&(s=r));if(i){e.splice(u--,1);var d=a();void 0!==d&&(t=d)}}return t}r=r||0;for(var u=e.length;u>0&&e[u-1][2]>r;u--)e[u]=e[u-1];e[u]=[o,a,r]}}(),function(){n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,{a:t}),t}}(),function(){var e,t=Object.getPrototypeOf?function(e){return Object.getPrototypeOf(e)}:function(e){return e.__proto__};n.t=function(o,a){if(1&a&&(o=this(o)),8&a)return o;if("object"===typeof o&&o){if(4&a&&o.__esModule)return o;if(16&a&&"function"===typeof o.then)return o}var r=Object.create(null);n.r(r);var s={};e=e||[null,t({}),t([]),t(t)];for(var i=2&a&&o;"object"==typeof i&&!~e.indexOf(i);i=t(i))Object.getOwnPropertyNames(i).forEach((function(e){s[e]=function(){return o[e]}}));return s["default"]=function(){return o},n.d(r,s),r}}(),function(){n.d=function(e,t){for(var o in t)n.o(t,o)&&!n.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})}}(),function(){n.f={},n.e=function(e){return Promise.all(Object.keys(n.f).reduce((function(t,o){return n.f[o](e,t),t}),[]))}}(),function(){n.u=function(e){return"js/webfontloader.1d5f5fa5.js"}}(),function(){n.miniCssF=function(e){}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={},t="restaurant-map:";n.l=function(o,a,r,s){if(e[o])e[o].push(a);else{var i,c;if(void 0!==r)for(var d=document.getElementsByTagName("script"),u=0;u<d.length;u++){var l=d[u];if(l.getAttribute("src")==o||l.getAttribute("data-webpack")==t+r){i=l;break}}i||(c=!0,i=document.createElement("script"),i.charset="utf-8",i.timeout=120,n.nc&&i.setAttribute("nonce",n.nc),i.setAttribute("data-webpack",t+r),i.src=o),e[o]=[a];var f=function(t,n){i.onerror=i.onload=null,clearTimeout(p);var a=e[o];if(delete e[o],i.parentNode&&i.parentNode.removeChild(i),a&&a.forEach((function(e){return e(n)})),t)return t(n)},p=setTimeout(f.bind(null,void 0,{type:"timeout",target:i}),12e4);i.onerror=f.bind(null,i.onerror),i.onload=f.bind(null,i.onload),c&&document.head.appendChild(i)}}}(),function(){n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){n.p="/restaurant-map/"}(),function(){var e={143:0};n.f.j=function(t,o){var a=n.o(e,t)?e[t]:void 0;if(0!==a)if(a)o.push(a[2]);else{var r=new Promise((function(n,o){a=e[t]=[n,o]}));o.push(a[2]=r);var s=n.p+n.u(t),i=new Error,c=function(o){if(n.o(e,t)&&(a=e[t],0!==a&&(e[t]=void 0),a)){var r=o&&("load"===o.type?"missing":o.type),s=o&&o.target&&o.target.src;i.message="Loading chunk "+t+" failed.\n("+r+": "+s+")",i.name="ChunkLoadError",i.type=r,i.request=s,a[1](i)}};n.l(s,c,"chunk-"+t,t)}},n.O.j=function(t){return 0===e[t]};var t=function(t,o){var a,r,s=o[0],i=o[1],c=o[2],d=0;if(s.some((function(t){return 0!==e[t]}))){for(a in i)n.o(i,a)&&(n.m[a]=i[a]);if(c)var u=c(n)}for(t&&t(o);d<s.length;d++)r=s[d],n.o(e,r)&&e[r]&&e[r][0](),e[r]=0;return n.O(u)},o=self["webpackChunkrestaurant_map"]=self["webpackChunkrestaurant_map"]||[];o.forEach(t.bind(null,0)),o.push=t.bind(null,o.push.bind(o))}();var o=n.O(void 0,[998],(function(){return n(62)}));o=n.O(o)})();
//# sourceMappingURL=app.04380963.js.map